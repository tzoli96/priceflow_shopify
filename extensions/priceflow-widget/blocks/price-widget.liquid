{% comment %}
  PriceFlow Widget - Theme App Extension Block
  This embeds the storefront app with hot reload support
{% endcomment %}

<div
  id="priceflow-widget-{{ block.id }}"
  class="priceflow-widget"
  data-product-id="{{ product.id }}"
  data-product-handle="{{ product.handle }}"
  data-shop="{{ shop.permanent_domain }}"
>
  <iframe
    src="https://app.teszt.uk/storefront?productId={{ product.id }}&shop={{ shop.permanent_domain }}&handle={{ product.handle }}"
    width="100%"
    height="400"
    frameborder="0"
    style="border: 2px solid #667eea; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);"
    title="PriceFlow Widget"
  ></iframe>
</div>

<style>
  .priceflow-widget {
    margin: 20px 0;
  }

  .priceflow-widget iframe {
    display: block;
    max-width: 100%;
  }
</style>

{% schema %}
{
  "name": "PriceFlow Widget",
  "target": "section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Widget Title",
      "default": "Compare Prices"
    },
    {
      "type": "checkbox",
      "id": "show_competitors",
      "label": "Show Competitor Prices",
      "default": true
    }
  ]
}
{% endschema %}
